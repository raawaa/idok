# 项目任务规划文档

## 任务清单

### [已完成] 设置界面重构
- 重构 settings-modal.js，采用组件化设计
- 移除内联样式，统一使用 CSS 类
- 使用 HTML 模板替代字符串拼接
- 实现单向数据流管理

### [已完成] 修复设置界面显示问题
- 修复设置界面只显示保存和取消按钮，不显示设置内容的问题
- 修复模板访问方式，使用 template.content 属性访问模板内容

### [已完成] 修复设置功能与主应用集成问题
- 修改设置保存和加载机制，从localStorage改为使用IPC与主进程通信
- 修改目录和播放器选择功能，使用Electron的对话框API
- 确保设置界面与主应用程序设置系统同步

### [已完成] 主题切换性能优化
- 移除全局选择器的过渡效果，避免主题切换时的性能问题
- 简化按钮渐变背景为纯色，减少GPU计算负担
- 精确控制过渡属性，移除不必要的"all"关键字
- 添加requestAnimationFrame优化，确保动画在最佳时机执行
- 添加will-change属性优化性能
- 创建性能测试工具和详细优化报告

### [已完成] 增加按影片系列名称排序选项
- 在排序下拉框中增加"系列"选项
- 修改NFO解析逻辑，支持系列信息提取，修复NFO解析问题支持对象格式set节点
- 更新排序算法，支持按系列名称排序
- 对于没有系列信息的影片，按标题排序作为备选方案

### [已完成] 影片卡片演员和系列标签功能
- 在影片卡片中添加演员和系列标签显示
- 支持点击标签进行过滤（演员通过下拉框，系列通过搜索）
- 实现演员标签的展开收起功能，超过3个演员时显示"+?"按钮
- 添加淡入动画效果，提升用户体验
- 支持亮色和暗色主题适配

### [未开始] 优化设置界面在暗黑主题下的表现
- 确保设置界面组件在暗黑主题下样式正确
- 优化模态框在不同主题下的视觉效果

### [已完成] 改进消息气泡排列方式
- 实现消息气泡从上到下顺序排列，而不是重叠覆盖
- 新消息出现时自动将旧消息挤下去
- 消息消失时重新排列剩余消息